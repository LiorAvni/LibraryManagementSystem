<Page x:Class="LibraryManagementSystem.View.Pages.LibrarianDashboard"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Librarian Dashboard"
      Loaded="Page_Loaded">

    <Page.Resources>
        <!-- Card Style -->
        <Style x:Key="MenuCard" TargetType="Border">
            <Setter Property="Background" Value="White"/>
            <Setter Property="Padding" Value="30"/>
            <Setter Property="CornerRadius" Value="10"/>
            <Setter Property="Margin" Value="10"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="Black" Opacity="0.1" ShadowDepth="2" BlurRadius="10"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Button Style -->
        <Style x:Key="MenuButton" TargetType="Button">
            <Setter Property="Background" Value="#3498db"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="20,10"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Margin" Value="0,15,0,0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="5" 
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#2980b9"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Icon Text Style -->
        <Style x:Key="IconText" TargetType="TextBlock">
            <Setter Property="FontSize" Value="48"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="Margin" Value="0,0,0,10"/>
        </Style>

        <!-- Card Title Style -->
        <Style x:Key="CardTitle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#2c3e50"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="Margin" Value="0,15,0,10"/>
        </Style>

        <!-- Card Description Style -->
        <Style x:Key="CardDescription" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Foreground" Value="#7f8c8d"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
            <Setter Property="TextAlignment" Value="Center"/>
        </Style>
    </Page.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto" Background="#f5f5f5">
        <Grid MaxWidth="1200" Margin="30,30,30,30">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Welcome Card -->
            <Border Grid.Row="0" Background="White" Padding="30" CornerRadius="10" Margin="0,0,0,30">
                <Border.Effect>
                    <DropShadowEffect Color="Black" Opacity="0.1" ShadowDepth="2" BlurRadius="10"/>
                </Border.Effect>
                <StackPanel>
                    <TextBlock FontSize="24" FontWeight="Bold" Foreground="#2c3e50" Margin="0,0,0,10">
                        <Run Text="Welcome, "/>
                        <Run x:Name="txtLibrarianName" Text="Librarian"/>
                        <Run Text="!"/>
                    </TextBlock>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock FontSize="14" Foreground="#7f8c8d" Margin="0,0,20,0">
                            <Run Text="Employee ID: "/>
                            <Run x:Name="txtEmployeeId" Text="N/A" FontWeight="Bold"/>
                        </TextBlock>
                        <TextBlock FontSize="14" Foreground="#7f8c8d">
                            <Run Text="Status: "/>
                        </TextBlock>
                        <Border x:Name="borderStatus" CornerRadius="5" Padding="8,4" Margin="5,0,0,0">
                            <TextBlock x:Name="txtStatus" Text="ACTIVE" FontWeight="SemiBold" FontSize="12"/>
                        </Border>
                    </StackPanel>
                    <TextBlock x:Name="txtSuspendedWarning" 
                               Text="⚠️ Your account is suspended. All actions are disabled. Please contact administration." 
                               FontSize="14" 
                               Foreground="#dc3545" 
                               FontWeight="SemiBold"
                               Margin="0,15,0,0"
                               Visibility="Collapsed"/>
                </StackPanel>
            </Border>

            <!-- Menu Grid -->
            <Grid Grid.Row="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Row 1: Search, Books, Users -->
                
                <!-- Search Books Card -->
                <Border Grid.Row="0" Grid.Column="0" Style="{StaticResource MenuCard}">
                    <StackPanel>
                        <TextBlock Text="🔍" Style="{StaticResource IconText}"/>
                        <TextBlock Text="Search Books" Style="{StaticResource CardTitle}"/>
                        <TextBlock Text="Search the library catalog" Style="{StaticResource CardDescription}"/>
                        <Button x:Name="btnSearchBooks" Content="Search" Style="{StaticResource MenuButton}" Click="SearchBooks_Click" MouseLeftButtonDown="NavigateToSearch"/>
                    </StackPanel>
                </Border>

                <!-- Manage Books Card -->
                <Border Grid.Row="0" Grid.Column="1" Style="{StaticResource MenuCard}">
                    <StackPanel>
                        <TextBlock Text="📚" Style="{StaticResource IconText}"/>
                        <TextBlock Text="Manage Books" Style="{StaticResource CardTitle}"/>
                        <TextBlock Text="Add, edit, or remove books from library" Style="{StaticResource CardDescription}"/>
                        <Button x:Name="btnManageBooks" Content="Go to Books" Style="{StaticResource MenuButton}" Click="ManageBooks_Click"/>
                    </StackPanel>
                </Border>

                <!-- Manage Users/Members Card (Dynamic Text) -->
                <Border Grid.Row="0" Grid.Column="2" Style="{StaticResource MenuCard}">
                    <StackPanel>
                        <TextBlock Text="👥" Style="{StaticResource IconText}"/>
                        <TextBlock x:Name="txtManageUsersTitle" Text="Manage Members" Style="{StaticResource CardTitle}"/>
                        <TextBlock x:Name="txtManageUsersDesc" Text="View and manage members" Style="{StaticResource CardDescription}"/>
                        <Button x:Name="btnManageUsers" Content="Go to Members" Style="{StaticResource MenuButton}" Click="ManageMembers_Click"/>
                    </StackPanel>
                </Border>

                <!-- Row 2: Loans, Reservations -->
                
                <!-- Manage Loans Card -->
                <Border Grid.Row="1" Grid.Column="0" Style="{StaticResource MenuCard}">
                    <StackPanel>
                        <TextBlock Text="📖" Style="{StaticResource IconText}"/>
                        <TextBlock Text="Manage Loans" Style="{StaticResource CardTitle}"/>
                        <TextBlock Text="Process book loans and returns" Style="{StaticResource CardDescription}"/>
                        <Button x:Name="btnManageLoans" Content="Go to Loans" Style="{StaticResource MenuButton}" Click="ManageLoans_Click"/>
                    </StackPanel>
                </Border>

                <!-- Reservations Card -->
                <Border Grid.Row="1" Grid.Column="1" Style="{StaticResource MenuCard}">
                    <StackPanel>
                        <TextBlock Text="📅" Style="{StaticResource IconText}"/>
                        <TextBlock Text="Reservations" Style="{StaticResource CardTitle}"/>
                        <TextBlock Text="View and manage book reservations" Style="{StaticResource CardDescription}"/>
                        <Button x:Name="btnManageReservations" Content="Go to Reservations" Style="{StaticResource MenuButton}" Click="ManageReservations_Click"/>
                    </StackPanel>
                </Border>

                <!-- Row 3: Authors, Categories, Publishers -->
                
                <!-- Manage Authors Card -->
                <Border Grid.Row="2" Grid.Column="0" Style="{StaticResource MenuCard}">
                    <StackPanel>
                        <TextBlock Text="👤" Style="{StaticResource IconText}"/>
                        <TextBlock Text="Manage Authors" Style="{StaticResource CardTitle}"/>
                        <TextBlock Text="Add, edit, or remove authors" Style="{StaticResource CardDescription}"/>
                        <Button x:Name="btnManageAuthors" Content="Go to Authors" Style="{StaticResource MenuButton}" Click="ManageAuthors_Click"/>
                    </StackPanel>
                </Border>

                <!-- Categories Card -->
                <Border Grid.Row="2" Grid.Column="1" Style="{StaticResource MenuCard}">
                    <StackPanel>
                        <TextBlock Text="🏷️" Style="{StaticResource IconText}"/>
                        <TextBlock Text="Categories" Style="{StaticResource CardTitle}"/>
                        <TextBlock Text="Manage book categories" Style="{StaticResource CardDescription}"/>
                        <Button x:Name="btnManageCategories" Content="Go to Categories" Style="{StaticResource MenuButton}" Click="ManageCategories_Click"/>
                    </StackPanel>
                </Border>

                <!-- Publishers Card -->
                <Border Grid.Row="2" Grid.Column="2" Style="{StaticResource MenuCard}">
                    <StackPanel>
                        <TextBlock Text="🏢" Style="{StaticResource IconText}"/>
                        <TextBlock Text="Publishers" Style="{StaticResource CardTitle}"/>
                        <TextBlock Text="Manage publishers" Style="{StaticResource CardDescription}"/>
                        <Button x:Name="btnManagePublishers" Content="Go to Publishers" Style="{StaticResource MenuButton}" Click="ManagePublishers_Click"/>
                    </StackPanel>
                </Border>

                <!-- Row 4: Reports, Settings -->
                
                <!-- Reports Card -->
                <Border Grid.Row="3" Grid.Column="0" Style="{StaticResource MenuCard}">
                    <StackPanel>
                        <TextBlock Text="📊" Style="{StaticResource IconText}"/>
                        <TextBlock Text="Reports" Style="{StaticResource CardTitle}"/>
                        <TextBlock Text="View library statistics and reports" Style="{StaticResource CardDescription}"/>
                        <Button x:Name="btnViewReports" Content="View Reports" Style="{StaticResource MenuButton}" Click="ViewReports_Click"/>
                    </StackPanel>
                </Border>

                <!-- Settings Card -->
                <Border x:Name="settingsCard" Grid.Row="3" Grid.Column="1" Style="{StaticResource MenuCard}">
                    <StackPanel>
                        <TextBlock Text="⚙️" Style="{StaticResource IconText}"/>
                        <TextBlock Text="Settings" Style="{StaticResource CardTitle}"/>
                        <TextBlock Text="Configure library settings" Style="{StaticResource CardDescription}"/>
                        <Button x:Name="btnSettings" Content="Go to Settings" Style="{StaticResource MenuButton}" Click="Settings_Click"/>
                    </StackPanel>
                </Border>
            </Grid>
        </Grid>
    </ScrollViewer>
</Page>
